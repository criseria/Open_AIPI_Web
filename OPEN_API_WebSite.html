<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://code.jquery.com/jquery-3.7.0.min.js"
        integrity="sha256-2Pmvv0kuTBOenSvLm6bvfBSSHrUJ+3A7x6P5Ebd07/g=" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://unpkg.com/@kfonts/nanum-handwritting-mongdol/index.css" />
    <title>책 검색 사이트</title>
    <style>
        #container {
            position: relative;
            text-align: center;
        }

        #query {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            padding: 10px;
            width: 600px;
            border: 1px solid #ccc;
        }

        #search {
            position: absolute;
            top: 50%;
            left: calc(50% + 160px);
            transform: translate(-50%, -50%);
            padding: 10px 20px;
            background-color: #007bff;
            border: none;
            color: #fff;
            cursor: pointer;
        }

        #book_img {
            width: 100%;
            height: 300px;
        }

        #result {
            margin-top: 320px;
            width: 1100px;
            margin: 0 auto;
            font-family: "나눔손글씨 몽돌", "나눔손글씨몽돌", "nanum-handwritting-mongdol";
            font-weight: bold;
            font-size: 25px;
        }

        .book-container {
            width: 100%;
            text-align: left;
            margin-top: 75px;
            padding-left: 20px;
            padding-right: 20px;
            padding-bottom: 30px;
            border: 3px solid #ccc;
            box-sizing: border-box;
            overflow: hidden;
            box-shadow: 0px 30px 0px -20px #FFFFFF, 0px -30px 0px -20px #FFFFFF, 30px 0px 0px -20px #FFFFFF, -30px 0px 0px -20px #FFFFFF, 0px 0px 0px 30px gray, 5px 5px 5px 3px rgba(200, 194, 255, 0);
        }

        .book-container img {
            width: 120px;
            height: 200px;
            float: left;
            margin-right: 10px;
            margin-top: 38px;
        }

        .book-info {
            float: left;
            width: calc(100% - 130px);
        }

        #search_img {
            width: 50px;
            height: 50px;
        }

        #head {
            font-size: 40px;
            color: white;
            font-weight: bold;
        }

        #search_button {
            width: 70px;
            height: 50px;
            position: absolute;
            top: 50%;
            left: 65%;
            transform: translate(-50%, -50%);
            padding: 10px;
        }

        .book-container h2 a {
            /* 적절한 색상으로 변경 */
            color: #333;
            text-decoration: none;
            /* 전환 효과 추가 */
            transition: color 0.3s, font-size 0.3s;
        }

        .book-container h2 a:hover {
            /* 커서를 올렸을 때 더 진한 색상으로 변경 */
            color: #007bff;
            /* 커서를 올렸을 때 글꼴 크기 증가 */
            font-size: 45px;
            /* 커서를 올렸을 때 밑줄 추가 */
            text-decoration: underline;
        }

        #sidebar {
            background-color: antiquewhite;
            margin: 150px 0px 0px 0px;
            position: fixed;
            width: 300px;
            height: 600;
            padding: 80px 20px 80px 100px;
            box-sizing: border-box;
        }
        #sidebar_menu{
            padding: 30px;
        }
        #sidebar a {
            text-decoration: none;
        }
    </style>
</head>

<body>
    <div id="container">
        <img src="실전_경영_도서_책_추천_베스트_BEST.png" id="book_img">
        <div style="position: absolute; top: 30%; left: 50%; transform: translate(-50%, -50%);">
            <img src="pngwing.com (1).png" alt="">
            <span id="head">나만의 도서 검색하기</span>
            <img src="pngwing.com.png" id="search_img">
        </div>
        <input type="text" id="query" placeholder="검색하실 책 제목을 입력해주세요!">
        <img src="search.png" id="search_button" style="cursor: pointer;">
    </div>
    <div>
        <ul id="sidebar">
            내 주변 문고 찾기
            <li id="sidebar_menu"><a href="교보문고.html" target="_blank">교보문고</a></li>
            <li id="sidebar_menu"><a href="경인문고.html" target="_blank">경인문고</a></li>
            <li id="sidebar_menu"><a href="영풍문고.html" target="_blank">영풍문고</a></li>
        </ul>
    </div>
    <div id="result" style="text-align: center;"></div> <!-- 검색 결과를 표시할 영역 -->


    <script src="https://code.jquery.com/jquery-3.6.0.js"
        integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>

    <script>
        $(document).ready(function () {
            var pageNum = 1;

            // 도서 검색 수행하는 함수
            function searchBooks() {
                $("#result").html(""); // 이전 검색 결과 초기화
                pageNum = 1; // 페이지 번호를 1로 초기화

                $.ajax({
                    method: "GET",
                    url: "https://dapi.kakao.com/v3/search/book?target=title",
                    data: { query: $("#query").val(), page: pageNum },
                    headers: { Authorization: "KakaoAK 5464fac7b364b0bf836f1ad582aed748" }
                })
                    .done(function (msg) {
                        console.log(msg);
                        appendBookInfo(msg);
                    });
            }

            // 검색 버튼 클릭 이벤트 리스너
            $("#search_button").click(function () {
                searchBooks();
            });

            // 검색어 입력 필드에서 "Enter" 키 누름 이벤트 리스너
            $("#query").keypress(function (event) {
                if (event.which == 13) { // 13은 "Enter" 키의 키코드입니다.
                    event.preventDefault(); // 기본 Enter 키 동작 (예: 폼 제출) 방지
                    searchBooks(); // 도서 검색 수행
                }
            });

            function appendBookInfo(data) {
                for (var i = 0; i < 10; i++) {
                    $("#result").append(
                        "<div class='book-container'>" +
                        "<img src='" + data.documents[i].thumbnail + "'>" +
                        "<div class='book-info'>" +
                        "<h2><a href='" + data.documents[i].url + "' target='_blank'>" + data.documents[i].title + "</a></h2>" +
                        "<strong>저자:</strong> " + data.documents[i].authors + "<br>" +
                        "<strong>출판사:</strong> " + data.documents[i].publisher + "<br>" +
                        "<strong>요약:</strong> " + data.documents[i].contents + "...<br></div></div>"
                    );
                }
            }

            $("#search_button").click(function () {
                $("#result").html(""); // 검색 결과 초기화

                $.ajax({
                    method: "GET",
                    url: "https://dapi.kakao.com/v3/search/book?target=title",
                    data: { query: $("#query").val(), page: pageNum },
                    headers: { Authorization: "KakaoAK 5464fac7b364b0bf836f1ad582aed748" }
                })
                    .done(function (msg) {
                        console.log(msg);
                        appendBookInfo(msg);
                    });
            });

            $(window).scroll(function () {
                if (Math.ceil($(window).scrollTop()) + $(window).height() >= $(document).height()) {
                    pageNum++;
                    $.ajax({
                        method: "GET",
                        url: "https://dapi.kakao.com/v3/search/book?target=title",
                        data: { query: $("#query").val(), page: pageNum },
                        headers: { Authorization: "KakaoAK 5464fac7b364b0bf836f1ad582aed748" }
                    })
                        .done(function (msg) {
                            console.log(msg);
                            appendBookInfo(msg);
                        });
                }
            });

            $("#sidebar a").click(function (event) {
                event.preventDefault(); // 기본 링크 클릭 동작 취소

                var newWindowWidth = 900;
                var newWindowHeight = 500;

                var leftPosition = (screen.width - newWindowWidth) / 2;
                var topPosition = (screen.height - newWindowHeight) / 2;

                var newWindow = window.open(
                    $(this).attr("href"),
                    "_blank",
                    "width=" + newWindowWidth + ", height=" + newWindowHeight + ", left=" + leftPosition + ", top=" + topPosition
                );

                if (newWindow) {
                    newWindow.focus();
                }
            });
        })
    </script>
</body>

</html>